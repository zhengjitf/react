## batchedUpdates
由 `React-DOM` 导出，在 `packages/react-reconciler/src/ReactFiberWorkLoop.js` 定义

```js
export function batchedUpdates<A, R>(fn: A => R, a: A): R {
  const prevExecutionContext = executionContext;
  executionContext |= BatchedContext;
  try {
    return fn(a);
  } finally {
    executionContext = prevExecutionContext;
    if (executionContext === NoContext) {
      // Flush the immediate callbacks that were scheduled during this batch
      flushSyncCallbackQueue();
    }
  }
}
```
第一个参数是要执行的函数，之后的参数是要传入函数的参数，在函数执行前 `executionContext |= BatchedContext` 在当前执行上下文添加 `BatchedContext` ，执行过程中比如调用 `scheduleWork (scheduleUpdateOnFiber)` 会判断 `executionContext`，如果带上 `BatchedContext` 会跳过不执行 `performSyncWorkOnRoot`，执行结束后，还原 `executionContext` 判断如果没有任何值，则调用 `flushSyncCallbackQueue`


